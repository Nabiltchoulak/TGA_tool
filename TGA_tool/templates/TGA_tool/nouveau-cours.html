{% extends "layout.html" %}
{%load static %}
{% block title %} Nouveau  cours {% endblock %}
{% block content %}

 

<form action="{% url 'nouveau cours' choice %}" method="post">
    {% csrf_token %}
    <div >
    <legend style="font-size:30px; color: blue;">Partie cours:</legend>
    {{cours_form.as_p}}
    </div>
    <br><br>
    <fieldset>
    <legend style="font-size:30px; color: blue;" >Partie fr√©quence:</legend>
    <div id="freq_form">
    <p id="frequence_id">
    {{frequency_form.frequence.errors}}
    {{frequency_form.frequence.label_tag}}
    {{frequency_form.frequence}}
    {{frequency_form.frequence.help_text}}
    </p>
    <p id="creneau_id">
    {{frequency_form.creneau.errors}}
    {{frequency_form.creneau.label_tag}}
    {{frequency_form.creneau}}
    {{frequency_form.creneau.help_text}}
    </p>
    <p id="jour_id">
    {{frequency_form.jour.errors}}
    {{frequency_form.jour.label_tag}}
    {{frequency_form.jour}}
    {{frequency_form.jour.help_text}}
    </p>
    <p id="jour_two_id">
    {{frequency_form.jour_two.errors}}
    {{frequency_form.jour_two.label_tag}}
    {{frequency_form.jour_two}}
    {{frequency_form.jour_two.help_text}}
    </p>
    <p id="jour_three_id">
    {{frequency_form.jour_three.errors}}
    {{frequency_form.jour_three.label_tag}}
    {{frequency_form.jour_three}}
    {{frequency_form.jour_three.help_text}}
    </p>
    <p id="day_of_month_id">
    {{frequency_form.day_of_month.errors}}
    {{frequency_form.day_of_month.label_tag}}
    {{frequency_form.day_of_month}}
    {{frequency_form.day_of_month.help_text}}
    </p>
    <br>
    <span id="period_id">
    {{frequency_form.period.errors}}
    {{frequency_form.period.label_tag}}
    {{frequency_form.period}}
    <span id="help_period">{{frequency_form.period.help_text}}</span>
    </span>
    <br>
    <p id="date_debut_id">
    {{frequency_form.date_debut.errors}}
    {{frequency_form.date_debut.label_tag}}
    {{frequency_form.date_debut}}
    {{frequency_form.date_debut.help_text}}
    </p>
    <p id="date_limite_id">
    {{frequency_form.date_limite.errors}}
    {{frequency_form.date_limite.label_tag}}
    {{frequency_form.date_limite}}
    {{frequency_form.date_limite.help_text}}
    </p>
    </div>
    </fieldset>
   <div class="col-lg-6">
        <input type="submit" value="Submit" name="end" />
    </div>
    <div class="col-lg-6">
        <input type="submit" value="Submit & add other" name="submit & add other" />
    </div>
</form>


<style type="text/css">



input[type=text],input[type=number] ,select {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

h1,h2 {
    text-align: center;
}
input[type=submit] {
  width: 100%;
  background-color: #012168;
  color: white;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  display : block-inline
  
}


ul li label {
  display: block;
  position: relative;
  padding-left: 35px;
  margin-bottom: 12px;
  cursor: pointer;
  font-size: 18px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}


ul li label input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

.checkmark {
  position: absolute;
  top: 0;
  left: 0;
  height: 25px;
  width: 25px;
  background-color: #eee;
}

/* On mouse-over, add a grey background color */
ul li label:hover input ~ .checkmark {
  background-color: #ccc;
}

/* When the checkbox is checked, add a blue background */
ul li label input:checked ~ .checkmark {
  background-color: #2196F3;
}

/* Create the checkmark/indicator (hidden when not checked) */
.checkmark:after {
  content: "";
  position: absolute;
  display: none;
}

/* Show the checkmark when checked */
ul li label input:checked ~ .checkmark:after {
  display: block;
}

/* Style the checkmark/indicator */
ul li label .checkmark:after {
  left: 9px;
  top: 5px;
  width: 5px;
  height: 10px;
  border: solid white;
  border-width: 0 3px 3px 0;
  -webkit-transform: rotate(45deg);
  -ms-transform: rotate(45deg);
  transform: rotate(45deg);
}

/* Hide the browser's default radio button */
#id_eleve li label input {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
}

/* Create a custom radio button */
.checkmark-radio {
  position: absolute;
  top: 0;
  left: 0;
  height: 25px;
  width: 25px;
  background-color: #eee;
  border-radius: 50%;
}

/* On mouse-over, add a grey background color */
#id_eleve li label:hover input ~ .checkmark-radio {
  background-color: #ccc;
}
#id_client li label:hover input ~ .checkmark-radio {
  background-color: #ccc;
}
/* When the radio button is checked, add a blue background */
#id_eleve li label input:checked ~ .checkmark-radio {
  background-color: #2196F3;
}
#id_client li label input:checked ~ .checkmark-radio {
  background-color: #2196F3;
}
/* Create the indicator (the dot/circle - hidden when not checked) */
.checkmark-radio:after {
  content: "";
  position: absolute;
  display: none;
}

/* Show the indicator (dot/circle) when checked */
#id_eleve li label input:checked ~ .checkmark-radio:after {
  display: block;
}
#id_client li label input:checked ~ .checkmark-radio:after {
  display: block;
}
/* Style the indicator (dot/circle) */
ul li label .checkmark-radio:after {
  top: 9px;
  left: 9px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: white;
}

</style>


{% endblock %}

{% block javascript %}
<script>
function csrfSafeMethod(method) {

    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
  }

  $.ajaxSetup({
    beforeSend: function (xhr, settings) {
      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader("X-CSRFToken", csrftoken);
      }
    }
  });
  var csrftoken = Cookies.get('csrftoken');

    
  
$(function() {

    $creneau=$("#creneau_id");
    $week_day=$("#jour_id");
    $week_day_two=$("#jour_two_id");
    $week_day_three=$("#jour_three_id");
    $month_day=$("#day_of_month_id");
    $period=$("#period_id");
    $start_date=$("#date_debut_id");
    $end_date=$("#date_limite_id");
    $("#freq_form >").not("#frequence_id").hide();
    $('#id_frequence').on("click",function(){
        $("#freq_form > *").not("#frequence_id").hide();
    
        var $option = $(this).find('option:selected');
        value=$option.val()
        console.log(value)


        switch(value){
            case "Une seance":
                $creneau.show();
                $start_date.show();
                break;

            case "Chaque jour":
                $creneau.show();
                $start_date.show();
                $end_date.show();
                break;

            case "Un jour chaque semaine":
                $creneau.show();
                $week_day.show();
                $start_date.show();
                $end_date.show();
                break;
            case "Deux fois par semaine":
                $creneau.show();
                $week_day.show();
                $week_day_two.show();
                $start_date.show();
                $end_date.show();
                break;

            case "Trois fois par semaine":
                $creneau.show();
                $week_day.show();
                $week_day_two.show();
                $week_day_three.show();
                $start_date.show();
                $end_date.show();
                break;

            case "Un jour chaque mois":
                $creneau.show();
                $month_day.show();
                $start_date.show();
                $end_date.show();
                break;

            case "Jours":
                $creneau.show();
                $period.show();
                $period.children("#help_period").text("Jours");
                $start_date.show();
                $end_date.show();
                break;

            case "Semaines":
                $creneau.show();
                $week_day.show();
                $period.show();
                $period.children("#help_period").text("Semaines");
                $start_date.show();
                $end_date.show();
                break;
            
            case "Mois":
                $creneau.show();
                $month_day.show();
                $period.show();
                $period.children("#help_period").text("Mois");
                $start_date.show();
                $end_date.show();
                break;
        };

    });
   
     $('#id_langue').on("change", function () {

      var $option = $(this).find('option:selected');

      //Added with the EDIT
      var value = $option.val(); //returns the value of the selected option.
      var text = $option.text(); //returns the text of the selected option.
      
      $.post(
        '/TGA_tool/ajax_new_cours', {

          langue_id: value
        },
        function (data) {
          console.log(data);
            $("#id_session").empty(); // dont emove text only           
            $("#id_session").append(data);
            $('#id_session li label').append('<span> </span>'); //add span without class (does not accept with class)
            $('#id_session li label span').addClass("checkmark"); //add the class
            $('#id_eleve li label,#id_client li label').append('<span> </span>');
            $('#id_eleve li label span,#id_client li label span').addClass("checkmark-radio");//add the class
            

        },
        'html',

      );
      });
});

</script>
{% endblock %}